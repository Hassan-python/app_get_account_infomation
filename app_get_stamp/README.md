# 押印抽出アプリケーション

このプロジェクトは、画像から押印部分を自動的に抽出するStreamlitアプリケーションです。複数の抽出方法を試すことができ、抽出された押印をダウンロードすることも可能です。

## 機能

- 複数の押印抽出方法
  - K-meansクラスタリング
  - 色空間フィルタリング（赤、青、黒の押印に対応）
  - エッジ検出
- 抽出パラメータの調整
- 抽出された押印の可視化
- 押印画像のダウンロード

## インストール方法

1. リポジトリをクローンまたはダウンロードします。
2. 必要なライブラリをインストールします。

```bash
pip install -r requirements.txt
```

## 使い方

### 基本的な押印抽出アプリ

```bash
streamlit run stamp_extractor_app.py
```

### 高度な押印抽出アプリ（複数の抽出方法）

```bash
streamlit run advanced_stamp_extractor_app.py
```

## 抽出方法の説明

### K-meansクラスタリング

画像をグレースケールに変換し、K-meansクラスタリングで背景と押印を分離します。少数派のクラスタを押印と仮定し、連結成分分析で個別の押印を抽出します。

### 色空間フィルタリング

HSV色空間で特定の色（赤、青、黒など）の範囲をフィルタリングし、押印を抽出します。特に色付きの押印に効果的です。

### エッジ検出

Cannyエッジ検出で画像のエッジを検出し、モルフォロジー演算で輪郭を閉じた後、連結成分分析で押印を抽出します。

## パラメータ調整

- **最小面積**: 抽出する押印の最小面積を設定します。小さすぎると小さなノイズも抽出され、大きすぎると小さな押印が無視されます。
- **ぼかしサイズ**: ノイズ除去のためのぼかし処理の強さを調整します。
- **Canny閾値**: エッジ検出方法使用時のエッジ検出感度を調整します。

## 注意点

- 画像の品質や押印の特徴によって、最適な抽出方法やパラメータが異なります。
- 背景と押印の色や明るさが似ている場合、抽出が難しくなることがあります。
- 複数の抽出方法を試して、最適な結果を得ることをお勧めします。

## 技術的な背景

このアプリケーションは以下の技術を使用しています：

- OpenCV: 画像処理
- scikit-learn: K-meansクラスタリング
- Streamlit: Webインターフェース
- NumPy: 数値計算
- Matplotlib: 可視化

## ライセンス

MITライセンス 